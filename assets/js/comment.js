var addComment=function(){function e(e,i){n("modal").classList.remove("hidden"),document.getElementById("modal-title").textContent=e,document.getElementById("modal-message").textContent=i,t("#close").addEventListener("click",function(){n("modal").classList.add("hidden"),o.innerHTML="Submit",o.classList.remove("disabled"),o.disabled=!1,r.reset(),r.doReset()})}var t=function(e){return document.querySelector(e)},n=function(e){return document.getElementById(e)},o=t(".submit-form"),r=t(".form");return r.doReset=function(){o.innerHTML="Submit",this.classList.remove("disabled"),this.disabled=!1},r.addEventListener("submit",function(t){t.preventDefault(),o.innerHTML="Posting...",o.classList.add("disabled"),o.disabled=!0;var n=function(t,n){console.log(n),e(t,"An error occured.<br>["+(n.errorCode||"unknown")+"]"),r.doReset()};fetch(this.getAttribute("action"),{method:"POST",body:new URLSearchParams(new FormData(this)),headers:new Headers({"content-type":"application/x-www-form-urlencoded"})}).then(function(t){t.ok?e("Comment submitted!","Thanks for your comment! It will be published after it's been approved by the Genics Blog team :)"):t.json().then(function(e){n("Server Error",e)})})["catch"](function(e){console.error(e),n("Unexpected Error",e)})}),{moveForm:function(e,t,o){var r=this,i=n(e),d=n(t),s=n("cancel-reply-btn"),a=n("replying-to-id");if(i&&d&&s&&a){if(r.respondId=t,!n("sm-temp-form-div")){var m=document.createElement("div");m.id="sm-temp-form-div",m.style.display="none",d.parentNode.insertBefore(m,d)}return i.parentNode.insertBefore(d,i.nextSibling),a.value=o,n("form-parent").classList.add("ml-14"),n("form-title").innerHTML="Add a reply",s.classList.remove("hidden"),s.onclick=function(){var e=n("sm-temp-form-div"),t=n(r.respondId);if(e&&t)return n("form-parent").classList.remove("ml-14"),n("form-title").innerHTML="Add a comment",n("replying-to-id").value=null,e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e),this.classList.add("hidden"),this.onclick=null,!1},n("commentbox-name").focus(),!1}}}}();